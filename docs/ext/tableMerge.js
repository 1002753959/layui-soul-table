layui.define(["table"],function(e){var h=layui.jquery;e("tableMerge",{render:function(n){var e=h(n.elem).next().children(".layui-table-box"),t=h(e.children(".layui-table-body").children("table").children("tbody").children("tr").toArray().reverse()),l=h(e.children(".layui-table-fixed-l").children(".layui-table-body").children("table").children("tbody").children("tr").toArray().reverse()),d=h(e.children(".layui-table-fixed-r").children(".layui-table-body").children("table").children("tbody").children("tr").toArray().reverse()),c={};function o(e,r){for(var a=c[r].mergeField,i=layui.table.cache[n.id].length,t=0;t<a.length;t++)if(layui.table.cache[n.id][i-2-e][a[t]]!==layui.table.cache[n.id][i-1-e][a[t]])return!0;return!1}layui.each(n.cols,function(i,e){layui.each(e,function(e,r){if(r.merge&&r.field){var a=[r.field];!0!==r.merge&&(a="string"==typeof r.merge?[r.merge]:r.merge),c[n.index+"-"+i+"-"+e]={mergeField:a,rowspan:1}}})}),t.each(function(e){for(var r in c)if(e===t.length-1||o(e,r)){var a=h(this).children('[data-key="'+r+'"]').outerHeight(),i=0;0===t.eq(e).data("index")&&(i=1),h(this).children('[data-key="'+r+'"]').attr("rowspan",c[r].rowspan).css({position:"static",height:a*c[r].rowspan+i}),l.eq(e).children('[data-key="'+r+'"]').attr("rowspan",c[r].rowspan).css({position:"static",height:a*c[r].rowspan+i}),d.eq(e).children('[data-key="'+r+'"]').attr("rowspan",c[r].rowspan).css({position:"static",height:a*c[r].rowspan+i}),c[r].rowspan=1}else h(this).children('[data-key="'+r+'"]').remove(),l.eq(e).children('[data-key="'+r+'"]').remove(),d.eq(e).children('[data-key="'+r+'"]').remove(),c[r].rowspan+=1})}})});